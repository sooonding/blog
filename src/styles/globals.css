@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/variable/pretendardvariable-dynamic-subset.css');
@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/variable/pretendardvariable.css');
@import url('https://webfontworld.github.io/amore/AritaBuri.css');
@import url('https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@200;300;400;500;600;700;800;900&display=swap');

/* Tailwind CSS v4에서는 단일 import 사용 */
@import 'tailwindcss';
@import 'tw-animate-css';

@custom-variant dark (&:is(.dark *));

/* 플러그인 선언 방식 변경 */
@plugin "@tailwindcss/typography";

html {
  scroll-behavior: smooth;
}

@font-face {
  font-family: 'Arita Buri';
  src: url('/fonts/AritaBuri.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

:root {
  --font-sans: 'Arita Buri', ui-sans-serif, system-ui, -apple-system;
}

/* -- colors --- */
@layer base {
  :root {
    --gray-50: #ffffff;
    --gray-75: #fdfdfd;
    --gray-100: #f8f8f8;
    --gray-200: #e6e6e6;
    --gray-300: #d5d5d5;
    --gray-400: #b1b1b1;
    --gray-500: #909090;
    --gray-600: #6d6d6d;
    --gray-700: #464646;
    --gray-800: #222222;
    --gray-900: #000000;
    --gray-950: #000000;

    --selection: hsla(0, 0%, 0%, 0.045);
    --border: hsla(0, 0%, 0%, 0.09);
    --spinner-color: rgba(0, 0, 0, 65);

    --page-background: var(--gray-50);

    --heading: var(--gray-900);
    --text-body: var(--gray-800);
    --text-second: var(--gray-700);
    --text-disabled: var(--gray-500);

    /* 버튼 관련 변수 추가 */
    --background: #ffffff;
    --foreground: #000000;
    --accent: #f4f4f5;
    --accent-foreground: #18181b;
    --border: #e4e4e7;
    --input: #e4e4e7;
    --ring: #71717a;
  }

  .dark {
    --gray-50: #000;
    --gray-75: #141414;
    --gray-100: #1d1d1d;
    --gray-200: #303030;
    --gray-300: #4b4b4b;
    --gray-400: #6a6a6a;
    --gray-500: #8d8d8d;
    --gray-600: #b0b0b0;
    --gray-700: #d0d0d0;
    --gray-800: #ebebeb;
    --gray-900: #fff;
    --gray-950: #fff;

    --selection: hsla(0, 0%, 100%, 0.077);
    --border: hsla(0, 0%, 100%, 0.1);
    --spinner-color: rgba(255, 255, 255, 65);

    --page-background: var(--gray-75);

    --heading: var(--gray-900);
    --text-body: var(--gray-800);
    --text-second: var(--gray-600);
    --text-disabled: var(--gray-500);

    /* 다크모드 버튼 변수 추가 */
    --background: #18181b;
    --foreground: #fafafa;
    --accent: #27272a;
    --accent-foreground: #fafafa;
    --border: #27272a;
    --input: #27272a;
    --ring: #52525b;
  }
}

/* -- variable --- */
@layer base {
  :root {
    --xl: 1200px;
    --lg: 1024px;
    --md: 768px;
    --sm: 640px;

    --page-top: 128px;
    --page-half-top: 64px;
    --page-width: 1072px;
    --content-width: 640px;
    --body-margin-left: max(24px, env(safe-area-inset-left));
    --body-margin-right: max(24px, env(safe-area-inset-right));

    /* --font-base: calc(1rem + 0.25vw); */
    /* font-size: var(--font-base); */
  }

  @media (max-width: var(--lg)) {
    :root {
      --page-top: 128px;
    }
  }

  @media (max-width: 768px) {
    :root {
      --page-top: 96px;
      --page-half-top: 48px;
      --body-margin-left: max(16px, env(safe-area-inset-left));
      --body-margin-right: max(16px, env(safe-area-inset-right));
    }
  }
}

/* ---- layout ---- */
@layer base {
  html {
    scroll-behavior: smooth;
    scroll-padding-top: var(--header-height);
    -webkit-tap-highlight-color: transparent;
  }

  /* react-remove-scroll 에서 강제로 body를 조작한다. */
  body {
    margin: 0;
    min-height: 100vh;
    padding: 0;
    font-family: theme('fontFamily.sans');
    font-size: theme('fontSize.base');
    line-height: theme('lineHeight.7');
    letter-spacing: theme('letterSpacing.normal');
    -webkit-font-smoothing: antialiased;
    background-color: var(--page-background);
    color: var(--text-second);
  }

  .container {
    padding-right: var(--body-margin-right);
    padding-left: var(--body-margin-left);
  }

  .container > main {
    margin-left: auto;
    margin-right: auto;
    max-width: var(--content-width);
    padding-top: var(--page-top);
    min-height: calc(100vh - var(--page-half-top) * 2 - 20px);
  }

  * {
    box-sizing: border-box;
    border-color: var(--border);
  }

  ::selection {
    background-color: var(--selection);
    box-shadow: none;
  }

  h1 {
    font-family: theme('fontFamily.serif');
    font-weight: theme('fontWeight.bold');
    color: var(--heading);
  }

  b,
  strong {
    font-weight: theme('fontWeight.bold');
    color: var(--text-body);
  }

  em {
    font-family: theme('fontFamily.serif');
    font-weight: theme('fontWeight.bold');
    font-style: normal;
    color: var(--text-body);
  }

  del {
    color: var(--text-disabled);
  }

  mark {
    border-radius: 0.125rem;
    background-color: var(--selection);
    font-weight: theme('fontWeight.medium');
    color: var(--text-body);
    padding: 3px 5px;
    margin: 0 2px;
    border-radius: 4px;
  }

  .link,
  .external-link,
  .mdx a {
    position: relative;
    display: inline-block;
    word-break: break-all;
    color: var(--text-body);
    text-decoration-line: underline;
    text-decoration-color: var(--border);
    text-decoration-thickness: 1px;
    text-underline-offset: 4px;
    transition-duration: 200ms;
    transition-timing-function: ease-in-out;
  }

  .link:hover,
  .external-link:hover,
  .mdx a:hover {
    color: var(--heading);
    text-decoration-color: transparent;
    transition-duration: 100ms;
  }

  .link::before,
  .external-link::before,
  .mdx a:not(.anchor)::before {
    position: absolute;
    inset-inline: -0.25rem;
    bottom: 0.5;
    top: 0;
    z-index: -10;
    border-radius: 0.25rem;
    content: '';
    transition-property: background-color;
  }

  .link:hover::before,
  .external-link:hover::before,
  .mdx a:not(.anchor):hover::before {
    background-color: var(--selection);
  }

  .external-link::before {
    right: -0.125rem;
  }

  .external-link::after {
    margin: 0;
    display: inline-block;
    height: 0.875rem;
    width: 0.875rem;
    content: '';
    background: url('data:image/svg+xml;utf8,<svg color="%23464646" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6m0 0H9m9 0v9"/></svg>');
    background-repeat: no-repeat;
    background-size: cover;
  }

  .dark .external-link::after {
    content: '';
    background: url('data:image/svg+xml;utf8,<svg color="%23B0B0B0" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M6 18L18 6m0 0H9m9 0v9"/></svg>');
    background-repeat: no-repeat;
    background-size: cover;
  }

  /* ---- scrollbar ---- */
  * {
    --scrollbar-size: 16px;
    --scrollbar-size-min: 44px;
    --scrollbar-color: var(--gray-200);
    scrollbar-color: var(--scrollbar-color) transparent;
    /* firefox */
    scrollbar-width: thin;
  }

  ::-webkit-scrollbar {
    width: var(--scrollbar-size);
    height: var(--scrollbar-size);
  }

  ::-webkit-scrollbar-thumb {
    min-width: var(--scrollbar-size-min);
    min-height: var(--scrollbar-size-min);
    background-color: var(--scrollbar-color);
    background-clip: padding-box;
    border: 5px solid transparent;
    border-radius: var(--scrollbar-size);
  }

  ::-webkit-scrollbar-thumb:hover {
    --scrollbar-color: var(--gray-300);
  }

  ::-webkit-scrollbar-thumb:active {
    --scrollbar-color: var(--gray-300);
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-button,
  ::-webkit-scrollbar-corner,
  ::-webkit-resizer {
    display: none;
  }
}

/* header blur layer */
@layer components {
  .blur-layer {
    --h: min(96px, var(--page-top));
    position: fixed;
    top: 0;
    z-index: 1;
    width: calc(100% + var(--body-margin-left) + var(--body-margin-right));
    height: var(--h);
    margin-bottom: calc(-1 * var(--h));
    margin-left: calc(-1 * var(--body-margin-left));
    pointer-events: none;
    user-select: none;
    backdrop-filter: blur(5px);
    opacity: 0.95;
    mask-image: linear-gradient(to bottom, #000000 25%, transparent);
  }

  .blur-layer:after {
    position: absolute;
    inset: 0;
    content: '';
    background: linear-gradient(to bottom, var(--page-background), transparent);
  }

  /* 페이드인 애니메이션 */
  [data-animate] {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
    will-change: opacity, transform;
  }

  [data-animate].animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  [data-animate][data-animate-speed='slow'] {
    transition-duration: 0.8s;
  }
}

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

@theme inline {
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}

@layer utilities {
  /* 페이드인 애니메이션 */
  [data-animate] {
    opacity: 0;
    transform: translateY(10px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  }

  [data-animate].animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  [data-animate][data-animate-speed='slow'] {
    transition-duration: 0.8s;
  }
}
